console.log("app.js is working properly");

const populate = async (value, currency) => {
  let myStr = "";
  url =
    "https://api.currencyapi.com/v3/latest?apikey=cur_live_n4X2NBdv47YUs7p4zlqfYcLxKRwZadnwDjiZ3QWj" +
    currency;
  //   let response = await fetch(url);
  //   let rJson = await response.json();
  //   console.log(rJson);

  let rJson = JSON.parse(
    `{"meta":{"last_updated_at":"2023-08-23T23:59:59Z"},"data":{"ADA":{"code":"ADA","value":3.7305944668},"AED":{"code":"AED","value":3.6725003908},"AFN":{"code":"AFN","value":83.0696847301},"ALL":{"code":"ALL","value":98.5532495716},"AMD":{"code":"AMD","value":383.6020380832},"ANG":{"code":"ANG","value":1.7866702704},"AOA":{"code":"AOA","value":824.7131559222},"ARB":{"code":"ARB","value":0.991909388},"ARS":{"code":"ARS","value":350.0378063025},"AUD":{"code":"AUD","value":1.5431402919},"AVAX":{"code":"AVAX","value":0.09680837},"AWG":{"code":"AWG","value":1.79},"AZN":{"code":"AZN","value":1.7},"BAM":{"code":"BAM","value":1.8037001952},"BBD":{"code":"BBD","value":2},"BDT":{"code":"BDT","value":109.5156703682},"BGN":{"code":"BGN","value":1.8013003499},"BHD":{"code":"BHD","value":0.376},"BIF":{"code":"BIF","value":2829.438902784},"BMD":{"code":"BMD","value":1},"BNB":{"code":"BNB","value":0.004616333},"BND":{"code":"BND","value":1.351340223},"BOB":{"code":"BOB","value":6.935340995},"BRL":{"code":"BRL","value":4.8583708789},"BSD":{"code":"BSD","value":1},"BTC":{"code":"BTC","value":3.78125e-5},"BTN":{"code":"BTN","value":82.9824031465},"BUSD":{"code":"BUSD","value":0.9997271482},"BWP":{"code":"BWP","value":13.5132121067},"BYN":{"code":"BYN","value":2.5011991418},"BYR":{"code":"BYR","value":25012.009147208},"BZD":{"code":"BZD","value":2},"CAD":{"code":"CAD","value":1.3527601552},"CDF":{"code":"CDF","value":2481.3731444065},"CHF":{"code":"CHF","value":0.877550102},"CLF":{"code":"CLF","value":0.0233400037},"CLP":{"code":"CLP","value":856.0073794464},"CNY":{"code":"CNY","value":7.2777612674},"COP":{"code":"COP","value":4074.0529842463},"CRC":{"code":"CRC","value":539.791793495},"CUC":{"code":"CUC","value":1},"CUP":{"code":"CUP","value":24},"CVE":{"code":"CVE","value":101.50339748},"CZK":{"code":"CZK","value":22.1369734274},"DAI":{"code":"DAI","value":1.0008228431},"DJF":{"code":"DJF","value":177.721},"DKK":{"code":"DKK","value":6.8602412974},"DOP":{"code":"DOP","value":56.7149813144},"DOT":{"code":"DOT","value":0.2228768267},"DZD":{"code":"DZD","value":136.6968319746},"EGP":{"code":"EGP","value":30.906513678},"ERN":{"code":"ERN","value":15},"ETB":{"code":"ETB","value":54.8701177245},"ETH":{"code":"ETH","value":0.0005948304},"EUR":{"code":"EUR","value":0.9203901374},"FJD":{"code":"FJD","value":2.2540103014},"FKP":{"code":"FKP","value":0.7861576434},"GBP":{"code":"GBP","value":0.7862900879},"GEL":{"code":"GEL","value":2.6268003375},"GGP":{"code":"GGP","value":0.7861574168},"GHS":{"code":"GHS","value":11.3524113394},"GIP":{"code":"GIP","value":0.7861576235},"GMD":{"code":"GMD","value":58.2435200216},"GNF":{"code":"GNF","value":8544.5840179983},"GTQ":{"code":"GTQ","value":7.8455708188},"GYD":{"code":"GYD","value":209.1988054045},"HKD":{"code":"HKD","value":7.8402315222},"HNL":{"code":"HNL","value":24.610474466},"HRK":{"code":"HRK","value":7.043251324},"HTG":{"code":"HTG","value":136.4955453819},"HUF":{"code":"HUF","value":351.7243726311},"IDR":{"code":"IDR","value":15276.696352411},"ILS":{"code":"ILS","value":3.7577405832},"IMP":{"code":"IMP","value":0.7861572613},"INR":{"code":"INR","value":82.4917552276},"IQD":{"code":"IQD","value":1309.9152396584},"IRR":{"code":"IRR","value":42008.339020393},"ISK":{"code":"ISK","value":132.3478681681},"JEP":{"code":"JEP","value":0.7861577335},"JMD":{"code":"JMD","value":156.2832376038},"JOD":{"code":"JOD","value":0.71},"JPY":{"code":"JPY","value":144.6571990208},"KES":{"code":"KES","value":144.3607704135},"KGS":{"code":"KGS","value":87.6018343494},"KHR":{"code":"KHR","value":4139.5117168502},"KMF":{"code":"KMF","value":455.2878675299},"KPW":{"code":"KPW","value":899.9760997355},"KRW":{"code":"KRW","value":1326.1521177525},"KWD":{"code":"KWD","value":0.3084200399},"KYD":{"code":"KYD","value":0.83333},"KZT":{"code":"KZT","value":460.8342988493},"LAK":{"code":"LAK","value":19485.378739911},"LBP":{"code":"LBP","value":15012.818458084},"LKR":{"code":"LKR","value":320.7894711752},"LRD":{"code":"LRD","value":186.2887509055},"LSL":{"code":"LSL","value":18.7940735674},"LTC":{"code":"LTC","value":0.0152316677},"LTL":{"code":"LTL","value":3.1777755014},"LVL":{"code":"LVL","value":0.646820161},"LYD":{"code":"LYD","value":4.8205406017},"MAD":{"code":"MAD","value":10.0038518493},"MATIC":{"code":"MATIC","value":1.7959647272},"MDL":{"code":"MDL","value":17.7959618257},"MGA":{"code":"MGA","value":4476.0504926074},"MKD":{"code":"MKD","value":56.7692283658},"MMK":{"code":"MMK","value":2094.9208543411},"MNT":{"code":"MNT","value":3477.5823010926},"MOP":{"code":"MOP","value":8.0771314067},"MRO":{"code":"MRO","value":356.999828},"MUR":{"code":"MUR","value":45.3959079688},"MVR":{"code":"MVR","value":15.4506227045},"MWK":{"code":"MWK","value":1077.9369763997},"MXN":{"code":"MXN","value":16.7869930422},"MYR":{"code":"MYR","value":4.65559092},"MZN":{"code":"MZN","value":63.6929573602},"NAD":{"code":"NAD","value":18.4437831349},"NGN":{"code":"NGN","value":756.8140808659},"NIO":{"code":"NIO","value":36.5590836858},"NOK":{"code":"NOK","value":10.5914512107},"NPR":{"code":"NPR","value":131.3296252637},"NZD":{"code":"NZD","value":1.6738002507},"OMR":{"code":"OMR","value":0.3831600448},"OP":{"code":"OP","value":0.6419474121},"PAB":{"code":"PAB","value":0.9992101497},"PEN":{"code":"PEN","value":3.6986806183},"PGK":{"code":"PGK","value":3.5848703941},"PHP":{"code":"PHP","value":56.5817077574},"PKR":{"code":"PKR","value":299.6068977988},"PLN":{"code":"PLN","value":4.1105406275},"PYG":{"code":"PYG","value":7297.4454577067},"QAR":{"code":"QAR","value":3.6401806939},"RON":{"code":"RON","value":4.5440607719},"RSD":{"code":"RSD","value":107.4815343026},"RUB":{"code":"RUB","value":93.0232839207},"RWF":{"code":"RWF","value":1186.562522148},"SAR":{"code":"SAR","value":3.7458605717},"SBD":{"code":"SBD","value":8.4160815573},"SCR":{"code":"SCR","value":14.1464919995},"SDG":{"code":"SDG","value":601.5},"SEK":{"code":"SEK","value":10.9120914187},"SGD":{"code":"SGD","value":1.3521602352},"SHP":{"code":"SHP","value":0.786290123},"SLL":{"code":"SLL","value":21761.759170893},"SOL":{"code":"SOL","value":0.0460970885},"SOS":{"code":"SOS","value":568.633543368},"SRD":{"code":"SRD","value":38.1461772812},"STD":{"code":"STD","value":22685.506485047},"SVC":{"code":"SVC","value":8.75},"SYP":{"code":"SYP","value":13099.815338711},"SZL":{"code":"SZL","value":18.4776724322},"THB":{"code":"THB","value":34.7487049449},"TJS":{"code":"TJS","value":10.9741316264},"TMT":{"code":"TMT","value":3.5},"TND":{"code":"TND","value":3.1000804414},"TOP":{"code":"TOP","value":2.3585403627},"TRY":{"code":"TRY","value":27.172903829},"TTD":{"code":"TTD","value":6.7362610232},"TWD":{"code":"TWD","value":31.8995146961},"TZS":{"code":"TZS","value":2492.8766084342},"UAH":{"code":"UAH","value":36.6899748386},"UGX":{"code":"UGX","value":3725.8066289808},"USD":{"code":"USD","value":1},"USDC":{"code":"USDC","value":1.000672851},"USDT":{"code":"USDT","value":1.0007083432},"UYU":{"code":"UYU","value":37.8776543184},"UZS":{"code":"UZS","value":11997.328460067},"VEF":{"code":"VEF","value":3196475.644654},"VND":{"code":"VND","value":23984.749570885},"VUV":{"code":"VUV","value":121.1601043768},"WST":{"code":"WST","value":2.7690045509},"XAF":{"code":"XAF","value":603.6296083443},"XAG":{"code":"XAG","value":0.041104516},"XAU":{"code":"XAU","value":0.0005213838},"XCD":{"code":"XCD","value":2.7},"XDR":{"code":"XDR","value":0.7525700773},"XOF":{"code":"XOF","value":603.6296047},"XPD":{"code":"XPD","value":0.000781573},"XPF":{"code":"XPF","value":109.7208915699},"XPT":{"code":"XPT","value":0.0010702547},"XRP":{"code":"XRP","value":1.8850889129},"YER":{"code":"YER","value":249.8734376205},"ZAR":{"code":"ZAR","value":18.4871028812},"ZMK":{"code":"ZMK","value":9001.2},"ZMW":{"code":"ZMW","value":19.493871981},"ZWL":{"code":"ZWL","value":4593.6386677331}}}`
  );
  console.log(rJson);
  
//   document.querySelector(".output").computedStyleMap.display = "block";
  
  for (let key of Object.keys(rJson["data"])) {
    console.log(key);
     myStr += `<tr>        
                   <td>${key}</td>
                   <td>${rJson["data"][key]["code"]}</td>
                   <td>${Math.round(rJson["data"][key]["value"] * value)} </td>
             </tr>
            `;
  }

  const tableBody = document.querySelector("tbody");
  tableBody.innerHTML = myStr;
};

const btn = document.querySelector(".btn");
btn.addEventListener("click", (e) => {
    e.preventDefault();
    console.log("button is clicked");
  const value = document.querySelector("input[name='quantity']").value;
  const currency = document.querySelector("select[name='currency']").value;

  populate(value, currency);
});
